var Ht=Object.defineProperty;var Ut=(o,i,e)=>i in o?Ht(o,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[i]=e;var N=(o,i,e)=>(Ut(o,typeof i!="symbol"?i+"":i,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ye=window,Ue=ye.ShadowRoot&&(ye.ShadyCSS===void 0||ye.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,je=Symbol(),We=new WeakMap;let vt=class{constructor(i,e,t){if(this._$cssResult$=!0,t!==je)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=i,this.t=e}get styleSheet(){let i=this.o;const e=this.t;if(Ue&&i===void 0){const t=e!==void 0&&e.length===1;t&&(i=We.get(e)),i===void 0&&((this.o=i=new CSSStyleSheet).replaceSync(this.cssText),t&&We.set(e,i))}return i}toString(){return this.cssText}};const jt=o=>new vt(typeof o=="string"?o:o+"",void 0,je),Vt=(o,...i)=>{const e=o.length===1?o[0]:i.reduce((t,n,r)=>t+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+o[r+1],o[0]);return new vt(e,o,je)},zt=(o,i)=>{Ue?o.adoptedStyleSheets=i.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):i.forEach(e=>{const t=document.createElement("style"),n=ye.litNonce;n!==void 0&&t.setAttribute("nonce",n),t.textContent=e.cssText,o.appendChild(t)})},Ge=Ue?o=>o:o=>o instanceof CSSStyleSheet?(i=>{let e="";for(const t of i.cssRules)e+=t.cssText;return jt(e)})(o):o;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ee;const be=window,Ye=be.trustedTypes,Wt=Ye?Ye.emptyScript:"",Xe=be.reactiveElementPolyfillSupport,ke={toAttribute(o,i){switch(i){case Boolean:o=o?Wt:null;break;case Object:case Array:o=o==null?o:JSON.stringify(o)}return o},fromAttribute(o,i){let e=o;switch(i){case Boolean:e=o!==null;break;case Number:e=o===null?null:Number(o);break;case Object:case Array:try{e=JSON.parse(o)}catch{e=null}}return e}},mt=(o,i)=>i!==o&&(i==i||o==o),we={attribute:!0,type:String,converter:ke,reflect:!1,hasChanged:mt},Te="finalized";let ne=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(i){var e;this.finalize(),((e=this.h)!==null&&e!==void 0?e:this.h=[]).push(i)}static get observedAttributes(){this.finalize();const i=[];return this.elementProperties.forEach((e,t)=>{const n=this._$Ep(t,e);n!==void 0&&(this._$Ev.set(n,t),i.push(n))}),i}static createProperty(i,e=we){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(i,e),!e.noAccessor&&!this.prototype.hasOwnProperty(i)){const t=typeof i=="symbol"?Symbol():"__"+i,n=this.getPropertyDescriptor(i,t,e);n!==void 0&&Object.defineProperty(this.prototype,i,n)}}static getPropertyDescriptor(i,e,t){return{get(){return this[e]},set(n){const r=this[i];this[e]=n,this.requestUpdate(i,r,t)},configurable:!0,enumerable:!0}}static getPropertyOptions(i){return this.elementProperties.get(i)||we}static finalize(){if(this.hasOwnProperty(Te))return!1;this[Te]=!0;const i=Object.getPrototypeOf(this);if(i.finalize(),i.h!==void 0&&(this.h=[...i.h]),this.elementProperties=new Map(i.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const e=[];if(Array.isArray(i)){const t=new Set(i.flat(1/0).reverse());for(const n of t)e.unshift(Ge(n))}else i!==void 0&&e.push(Ge(i));return e}static _$Ep(i,e){const t=e.attribute;return t===!1?void 0:typeof t=="string"?t:typeof i=="string"?i.toLowerCase():void 0}_$Eu(){var i;this._$E_=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(i=this.constructor.h)===null||i===void 0||i.forEach(e=>e(this))}addController(i){var e,t;((e=this._$ES)!==null&&e!==void 0?e:this._$ES=[]).push(i),this.renderRoot!==void 0&&this.isConnected&&((t=i.hostConnected)===null||t===void 0||t.call(i))}removeController(i){var e;(e=this._$ES)===null||e===void 0||e.splice(this._$ES.indexOf(i)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((i,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])})}createRenderRoot(){var i;const e=(i=this.shadowRoot)!==null&&i!==void 0?i:this.attachShadow(this.constructor.shadowRootOptions);return zt(e,this.constructor.elementStyles),e}connectedCallback(){var i;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(i=this._$ES)===null||i===void 0||i.forEach(e=>{var t;return(t=e.hostConnected)===null||t===void 0?void 0:t.call(e)})}enableUpdating(i){}disconnectedCallback(){var i;(i=this._$ES)===null||i===void 0||i.forEach(e=>{var t;return(t=e.hostDisconnected)===null||t===void 0?void 0:t.call(e)})}attributeChangedCallback(i,e,t){this._$AK(i,t)}_$EO(i,e,t=we){var n;const r=this.constructor._$Ep(i,t);if(r!==void 0&&t.reflect===!0){const s=(((n=t.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?t.converter:ke).toAttribute(e,t.type);this._$El=i,s==null?this.removeAttribute(r):this.setAttribute(r,s),this._$El=null}}_$AK(i,e){var t;const n=this.constructor,r=n._$Ev.get(i);if(r!==void 0&&this._$El!==r){const s=n.getPropertyOptions(r),a=typeof s.converter=="function"?{fromAttribute:s.converter}:((t=s.converter)===null||t===void 0?void 0:t.fromAttribute)!==void 0?s.converter:ke;this._$El=r,this[r]=a.fromAttribute(e,s.type),this._$El=null}}requestUpdate(i,e,t){let n=!0;i!==void 0&&(((t=t||this.constructor.getPropertyOptions(i)).hasChanged||mt)(this[i],e)?(this._$AL.has(i)||this._$AL.set(i,e),t.reflect===!0&&this._$El!==i&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(i,t))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const i=this.scheduleUpdate();return i!=null&&await i,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,r)=>this[r]=n),this._$Ei=void 0);let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(i=this._$ES)===null||i===void 0||i.forEach(n=>{var r;return(r=n.hostUpdate)===null||r===void 0?void 0:r.call(n)}),this.update(t)):this._$Ek()}catch(n){throw e=!1,this._$Ek(),n}e&&this._$AE(t)}willUpdate(i){}_$AE(i){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostUpdated)===null||n===void 0?void 0:n.call(t)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(i)),this.updated(i)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(i){return!0}update(i){this._$EC!==void 0&&(this._$EC.forEach((e,t)=>this._$EO(t,this[t],e)),this._$EC=void 0),this._$Ek()}updated(i){}firstUpdated(i){}};ne[Te]=!0,ne.elementProperties=new Map,ne.elementStyles=[],ne.shadowRootOptions={mode:"open"},Xe==null||Xe({ReactiveElement:ne}),((Ee=be.reactiveElementVersions)!==null&&Ee!==void 0?Ee:be.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var $e;const xe=window,se=xe.trustedTypes,Je=se?se.createPolicy("lit-html",{createHTML:o=>o}):void 0,Pe="$lit$",j=`lit$${(Math.random()+"").slice(9)}$`,yt="?"+j,Gt=`<${yt}>`,ee=document,fe=()=>ee.createComment(""),ge=o=>o===null||typeof o!="object"&&typeof o!="function",bt=Array.isArray,Yt=o=>bt(o)||typeof(o==null?void 0:o[Symbol.iterator])=="function",Ae=`[ 	
\f\r]`,le=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ke=/-->/g,Ze=/>/g,J=RegExp(`>|${Ae}(?:([^\\s"'>=/]+)(${Ae}*=${Ae}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),et=/'/g,tt=/"/g,xt=/^(?:script|style|textarea|title)$/i,Xt=o=>(i,...e)=>({_$litType$:o,strings:i,values:e}),re=Xt(1),te=Symbol.for("lit-noChange"),I=Symbol.for("lit-nothing"),it=new WeakMap,K=ee.createTreeWalker(ee,129,null,!1);function _t(o,i){if(!Array.isArray(o)||!o.hasOwnProperty("raw"))throw Error("invalid template strings array");return Je!==void 0?Je.createHTML(i):i}const Jt=(o,i)=>{const e=o.length-1,t=[];let n,r=i===2?"<svg>":"",s=le;for(let a=0;a<e;a++){const l=o[a];let c,u,h=-1,p=0;for(;p<l.length&&(s.lastIndex=p,u=s.exec(l),u!==null);)p=s.lastIndex,s===le?u[1]==="!--"?s=Ke:u[1]!==void 0?s=Ze:u[2]!==void 0?(xt.test(u[2])&&(n=RegExp("</"+u[2],"g")),s=J):u[3]!==void 0&&(s=J):s===J?u[0]===">"?(s=n??le,h=-1):u[1]===void 0?h=-2:(h=s.lastIndex-u[2].length,c=u[1],s=u[3]===void 0?J:u[3]==='"'?tt:et):s===tt||s===et?s=J:s===Ke||s===Ze?s=le:(s=J,n=void 0);const v=s===J&&o[a+1].startsWith("/>")?" ":"";r+=s===le?l+Gt:h>=0?(t.push(c),l.slice(0,h)+Pe+l.slice(h)+j+v):l+j+(h===-2?(t.push(void 0),a):v)}return[_t(o,r+(o[e]||"<?>")+(i===2?"</svg>":"")),t]};class ve{constructor({strings:i,_$litType$:e},t){let n;this.parts=[];let r=0,s=0;const a=i.length-1,l=this.parts,[c,u]=Jt(i,e);if(this.el=ve.createElement(c,t),K.currentNode=this.el.content,e===2){const h=this.el.content,p=h.firstChild;p.remove(),h.append(...p.childNodes)}for(;(n=K.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes()){const h=[];for(const p of n.getAttributeNames())if(p.endsWith(Pe)||p.startsWith(j)){const v=u[s++];if(h.push(p),v!==void 0){const b=n.getAttribute(v.toLowerCase()+Pe).split(j),S=/([.?@])?(.*)/.exec(v);l.push({type:1,index:r,name:S[2],strings:b,ctor:S[1]==="."?Zt:S[1]==="?"?ti:S[1]==="@"?ii:Se})}else l.push({type:6,index:r})}for(const p of h)n.removeAttribute(p)}if(xt.test(n.tagName)){const h=n.textContent.split(j),p=h.length-1;if(p>0){n.textContent=se?se.emptyScript:"";for(let v=0;v<p;v++)n.append(h[v],fe()),K.nextNode(),l.push({type:2,index:++r});n.append(h[p],fe())}}}else if(n.nodeType===8)if(n.data===yt)l.push({type:2,index:r});else{let h=-1;for(;(h=n.data.indexOf(j,h+1))!==-1;)l.push({type:7,index:r}),h+=j.length-1}r++}}static createElement(i,e){const t=ee.createElement("template");return t.innerHTML=i,t}}function oe(o,i,e=o,t){var n,r,s,a;if(i===te)return i;let l=t!==void 0?(n=e._$Co)===null||n===void 0?void 0:n[t]:e._$Cl;const c=ge(i)?void 0:i._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(o),l._$AT(o,e,t)),t!==void 0?((s=(a=e)._$Co)!==null&&s!==void 0?s:a._$Co=[])[t]=l:e._$Cl=l),l!==void 0&&(i=oe(o,l._$AS(o,i.values),l,t)),i}let Kt=class{constructor(i,e){this._$AV=[],this._$AN=void 0,this._$AD=i,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(i){var e;const{el:{content:t},parts:n}=this._$AD,r=((e=i==null?void 0:i.creationScope)!==null&&e!==void 0?e:ee).importNode(t,!0);K.currentNode=r;let s=K.nextNode(),a=0,l=0,c=n[0];for(;c!==void 0;){if(a===c.index){let u;c.type===2?u=new Ve(s,s.nextSibling,this,i):c.type===1?u=new c.ctor(s,c.name,c.strings,this,i):c.type===6&&(u=new ni(s,this,i)),this._$AV.push(u),c=n[++l]}a!==(c==null?void 0:c.index)&&(s=K.nextNode(),a++)}return K.currentNode=ee,r}v(i){let e=0;for(const t of this._$AV)t!==void 0&&(t.strings!==void 0?(t._$AI(i,t,e),e+=t.strings.length-2):t._$AI(i[e])),e++}},Ve=class St{constructor(i,e,t,n){var r;this.type=2,this._$AH=I,this._$AN=void 0,this._$AA=i,this._$AB=e,this._$AM=t,this.options=n,this._$Cp=(r=n==null?void 0:n.isConnected)===null||r===void 0||r}get _$AU(){var i,e;return(e=(i=this._$AM)===null||i===void 0?void 0:i._$AU)!==null&&e!==void 0?e:this._$Cp}get parentNode(){let i=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&(i==null?void 0:i.nodeType)===11&&(i=e.parentNode),i}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(i,e=this){i=oe(this,i,e),ge(i)?i===I||i==null||i===""?(this._$AH!==I&&this._$AR(),this._$AH=I):i!==this._$AH&&i!==te&&this._(i):i._$litType$!==void 0?this.g(i):i.nodeType!==void 0?this.$(i):Yt(i)?this.T(i):this._(i)}k(i){return this._$AA.parentNode.insertBefore(i,this._$AB)}$(i){this._$AH!==i&&(this._$AR(),this._$AH=this.k(i))}_(i){this._$AH!==I&&ge(this._$AH)?this._$AA.nextSibling.data=i:this.$(ee.createTextNode(i)),this._$AH=i}g(i){var e;const{values:t,_$litType$:n}=i,r=typeof n=="number"?this._$AC(i):(n.el===void 0&&(n.el=ve.createElement(_t(n.h,n.h[0]),this.options)),n);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===r)this._$AH.v(t);else{const s=new Kt(r,this),a=s.u(this.options);s.v(t),this.$(a),this._$AH=s}}_$AC(i){let e=it.get(i.strings);return e===void 0&&it.set(i.strings,e=new ve(i)),e}T(i){bt(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let t,n=0;for(const r of i)n===e.length?e.push(t=new St(this.k(fe()),this.k(fe()),this,this.options)):t=e[n],t._$AI(r),n++;n<e.length&&(this._$AR(t&&t._$AB.nextSibling,n),e.length=n)}_$AR(i=this._$AA.nextSibling,e){var t;for((t=this._$AP)===null||t===void 0||t.call(this,!1,!0,e);i&&i!==this._$AB;){const n=i.nextSibling;i.remove(),i=n}}setConnected(i){var e;this._$AM===void 0&&(this._$Cp=i,(e=this._$AP)===null||e===void 0||e.call(this,i))}},Se=class{constructor(i,e,t,n,r){this.type=1,this._$AH=I,this._$AN=void 0,this.element=i,this.name=e,this._$AM=n,this.options=r,t.length>2||t[0]!==""||t[1]!==""?(this._$AH=Array(t.length-1).fill(new String),this.strings=t):this._$AH=I}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(i,e=this,t,n){const r=this.strings;let s=!1;if(r===void 0)i=oe(this,i,e,0),s=!ge(i)||i!==this._$AH&&i!==te,s&&(this._$AH=i);else{const a=i;let l,c;for(i=r[0],l=0;l<r.length-1;l++)c=oe(this,a[t+l],e,l),c===te&&(c=this._$AH[l]),s||(s=!ge(c)||c!==this._$AH[l]),c===I?i=I:i!==I&&(i+=(c??"")+r[l+1]),this._$AH[l]=c}s&&!n&&this.j(i)}j(i){i===I?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,i??"")}},Zt=class extends Se{constructor(){super(...arguments),this.type=3}j(i){this.element[this.name]=i===I?void 0:i}};const ei=se?se.emptyScript:"";let ti=class extends Se{constructor(){super(...arguments),this.type=4}j(i){i&&i!==I?this.element.setAttribute(this.name,ei):this.element.removeAttribute(this.name)}},ii=class extends Se{constructor(i,e,t,n,r){super(i,e,t,n,r),this.type=5}_$AI(i,e=this){var t;if((i=(t=oe(this,i,e,0))!==null&&t!==void 0?t:I)===te)return;const n=this._$AH,r=i===I&&n!==I||i.capture!==n.capture||i.once!==n.once||i.passive!==n.passive,s=i!==I&&(n===I||r);r&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,i),this._$AH=i}handleEvent(i){var e,t;typeof this._$AH=="function"?this._$AH.call((t=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&t!==void 0?t:this.element,i):this._$AH.handleEvent(i)}};class ni{constructor(i,e,t){this.element=i,this.type=6,this._$AN=void 0,this._$AM=e,this.options=t}get _$AU(){return this._$AM._$AU}_$AI(i){oe(this,i)}}const nt=xe.litHtmlPolyfillSupport;nt==null||nt(ve,Ve),(($e=xe.litHtmlVersions)!==null&&$e!==void 0?$e:xe.litHtmlVersions=[]).push("2.8.0");const Et=(o,i,e)=>{var t,n;const r=(t=e==null?void 0:e.renderBefore)!==null&&t!==void 0?t:i;let s=r._$litPart$;if(s===void 0){const a=(n=e==null?void 0:e.renderBefore)!==null&&n!==void 0?n:null;r._$litPart$=s=new Ve(i.insertBefore(fe(),a),a,void 0,e??{})}return s._$AI(o),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Le,Ce;let Z=class extends ne{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i,e;const t=super.createRenderRoot();return(i=(e=this.renderOptions).renderBefore)!==null&&i!==void 0||(e.renderBefore=t.firstChild),t}update(i){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(i),this._$Do=Et(e,this.renderRoot,this.renderOptions)}connectedCallback(){var i;super.connectedCallback(),(i=this._$Do)===null||i===void 0||i.setConnected(!0)}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this._$Do)===null||i===void 0||i.setConnected(!1)}render(){return te}};Z.finalized=!0,Z._$litElement$=!0,(Le=globalThis.litElementHydrateSupport)===null||Le===void 0||Le.call(globalThis,{LitElement:Z});const rt=globalThis.litElementPolyfillSupport;rt==null||rt({LitElement:Z});((Ce=globalThis.litElementVersions)!==null&&Ce!==void 0?Ce:globalThis.litElementVersions=[]).push("3.3.3");class Re extends Z{get allImagesLoaded(){return this.imagesLoaded===this.images.length}_loadImages(){this.images.map((i,e)=>{fetch(i).then(this.imagesLoaded++)})}constructor(){super(),this.description="Click and drag horizontally to rotate image",this.images=this.getAttribute("items").split(","),this.isContinuous=this.getAttribute("continuous")==="true",this.isInteractive=this.getAttribute("interactive")==="true",this.didInteract=!1,this.isReversed=this.getAttribute("reverse")==="true",this.sequenceId=this.getAttribute("sequence-id"),this.imageData=[],this.visible=!1,this.index=0,this.oldIndex=null,this.oldX=null,this.imagesLoaded=0,this.totalCanvases=this.images.length,this._loadImages(),this.isInteractive&&this.addEventListener("mousemove",this.handleMouseMove.bind(this))}debounce(i,e=250,t=!1){let n=null;return function(){const r=this,s=arguments,a=function(){n=null,t||i.apply(r,s)},l=t&&!n;clearTimeout(n),n=setTimeout(a,e),l&&i.apply(r,s)}}handleMouseMove({buttons:i,clientX:e}){if(i){if(this.didInteract&&(this.didInteract=!0),this.hideOverlays(),this.oldX){const t=e-this.oldX,n=Math.floor(Math.log(Math.abs(t)))||1;t>0?this.isReversed?this.previousCanvas(n):this.nextCanvas(n):t<0&&(this.isReversed?this.nextCanvas(n):this.previousCanvas(n))}this.oldX=e}else this.oldX=null}hideAllImages(){this.images.forEach(i=>{i.classList.remove("visible")})}hideOverlays(){this.querySelectorAll(".overlay").forEach(i=>{i.classList.remove("visible")})}hideImage(i){i.className=""}hideLoadingOverlay(){this.querySelector(".overlay").classList.remove("visible")}nextCanvas(i=1){const e=this.index+i>=this.totalCanvases?this.index+i-this.totalCanvases:this.index+i;this.index=e}willUpdate(i){i.has("rotateToIndex")&&this.rotateToIndex!==!1&&this.performRotation(this.rotateToIndex)}performRotation(i){if(this.index===i)return;const e=setInterval(()=>{if(console.log(this.index),this.index===i&&(this.rotateToIndex=!1),this.rotateToIndex!==i){clearInterval(e);return}this.nextCanvas()},this.transition)}previousCanvas(i=1){const e=this.index-i<0?this.totalCanvases+this.index-i:this.index-i;this.index=e}showImage(i,e){i&&(e&&i.classList.add("fade-in"),i.classList.add("visible"))}synchronizeSequenceInstances(){clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{document.querySelectorAll(`q-image-sequence[sequence-id="${this.sequenceId}"]`).forEach(e=>{parseInt(e.getAttribute("index"))!==this.index&&e.setAttribute("index",this.index)})},250)}render(){const i=re`<div slot='loading-overlay' class='${this.allImagesLoaded?"":"visible"} loading overlay'>Loading Image Sequence...</div>`,e=this.isInteractive?re`<div slot='overlay' class="overlay ${this.oldX===null?"visible":""}"><span class="description">
            <svg class="description__icon">
              <symbol id="rotation-icon" viewBox="0 0 24 24">
                <path d="M6.07426 4.68451L6.89234 4.68451L6.89234 6.34444C7.68861 5.65993 8.56396 5.09807 9.5184 4.65884C10.4728 4.21961 11.4791 4 12.5371 4C13.5952 4 14.6014 4.21106 15.5559 4.63317C16.5103 5.05528 17.3856 5.6086 18.1819 6.29311L18.1819 4.68451L19 4.68451L19 7.93593L15.8913 7.93593L15.8913 7.08029L17.7565 7.08029C16.9821 6.39578 16.1694 5.85388 15.3186 5.45458C14.4678 5.05528 13.5406 4.85564 12.5371 4.85564C11.5336 4.85564 10.6092 5.05528 9.76382 5.45458C8.91847 5.85388 8.10311 6.39578 7.31775 7.08029L9.18298 7.08029L9.18298 7.93593L6.07426 7.93593L6.07426 4.68451ZM6.09062 14.0794L7.8086 9.42473L9.05209 9.90389C9.24843 9.98375 9.42023 10.0978 9.56748 10.2461C9.71474 10.3945 9.81018 10.577 9.85381 10.7938L10.1156 12.1457L14.975 9.86966C15.3895 9.67572 15.8067 9.66431 16.2267 9.83544C16.6466 10.0066 16.9493 10.3089 17.1348 10.7424C17.3202 11.1759 17.3338 11.6123 17.1757 12.0515C17.0175 12.4908 16.7312 12.8073 16.3167 13.0013L13.7479 14.1992L13.9115 14.6099C13.9333 14.6555 13.9442 14.7069 13.9442 14.7639L13.9442 14.935L13.8461 17.7415C13.8352 18.0381 13.737 18.3005 13.5516 18.5287C13.3661 18.7569 13.1316 18.9109 12.848 18.9907L9.3466 19.9491C9.03027 20.0403 8.73031 20.009 8.4467 19.8549C8.1631 19.7009 7.95585 19.4699 7.82496 19.1619L6.12334 15.1575C6.04699 14.9864 6.00608 14.8067 6.00063 14.6184C5.99518 14.4302 6.02517 14.2505 6.09062 14.0794ZM6.97415 14.6099L8.83938 19.0079L12.848 17.9469L12.9953 14.4559L12.6189 13.6002L15.9076 12.0601C16.0931 11.9688 16.2185 11.8433 16.284 11.6836C16.3494 11.5239 16.3385 11.3471 16.2512 11.1531C16.164 10.9592 16.044 10.8308 15.8913 10.7681C15.7386 10.7053 15.5695 10.7196 15.3841 10.8109L9.41204 13.5831L8.88847 10.9478L8.38126 10.7595L6.97415 14.6099Z" />
              </symbol>
              <switch>
                <use xlink:href="#rotation-icon"></use>
              </switch>
            </svg>
            <span class="description__text">${this.description}</span>
          </span></div>`:"";return re`<div class="image-sequence ${this.allImagesLoaded?"":"loading"} ${this.isInteractive?"interactive":""}">
                  <slot name="placeholder-image">
                    <img slot="placeholder-image" class="${this.allImagesLoaded?"":"loading"} placeholder" src="${this.images.length>0?this.images[0]:""}" >
                  </slot>
                  <slot name="loading-overlay">
                    ${i}
                  </slot>                
                  <slot name="images">
                    <img slot="images" class="${this.allImagesLoaded?"visible":""} ${this.didInteract?"":"fade-in"} " src="${this.images[this.index]}">
                  </slot>
                  <slot name="overlay">
                    ${e}
                  </slot>
                </div>`}}N(Re,"styles",Vt`
      :host {
        position: relative;
        display: flex;
        justify-content: center;
        max-width: 100vw;
        max-height: 100vh;
      }

      .image-sequence.interactive {
        height: 100%;
        cursor: grab;
      }

      .overlay {
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0);
        color: white;
        transition: all 0.25s linear;
      }

      .overlay.visible {
        opacity: 1;
      }

      .overlay:not(.visible) {
        opacity: 0;
      }

      .overlay:hover {
        background: rgba(0,0,0,0.6);
      }

      .overlay.loading.visible {
        animation: loading-overlay 1s infinite alternate;
      }

      @keyframes loading-overlay {
        from {
          opacity: 0.6;
        }
        to {
          opacity: 1;
        }
      }

      .description {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        opacity: 0;
        transition: opacity 0.25s linear;
      }

      .description__icon {
        fill: white;
        height: 2em;
      }

      .overlay:hover .description {
        opacity: 1;
      }

      slot[name='images'] img {
        display: block;
        pointer-events: none;
        user-select: none;
        width: 100%;
        height: 100%;
      }

      slot[name='images'] img:not(.placeholder) {
        position: absolute;
        top: 0;
        left: 0;
      }

      slot[name='images'] img.visible {
        opacity: 1;
        object-fit: contain;
      }

      slot[name='images'] img:not(.visible) {
        opacity: 0;
      }

      slot[name='images'] img.fade-in {
        animation: fade-in 0.25s 1 linear;          
      }

      @keyframes fade-in {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      slot[name='placeholder-image'] img.loading {
        opacity: 1;
        filter: brightness(0.4);
        animation: loading-image 1s linear infinite alternate;
      }

      @keyframes loading-image {
        from {
          filter: brightness(0.4);
        }
        to {
          filter: brightness(0.2);
        }
      }

      slot[name='placeholder-image'] img {
        opacity: 0;
        transition: opacity 0.25s linear;
        object-fit: cover;
      }`),N(Re,"properties",{index:{type:Number},didInteract:{type:Boolean,state:!0},visible:{type:Boolean,state:!0},images:{type:Array,state:!0},rotateToIndex:{attribute:"rotate-to-index",type:Number},transition:{type:Number}});customElements.define("q-image-sequence",Re);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ri={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},si=o=>(...i)=>({_$litDirective$:o,values:i});let oi=class{constructor(i){}get _$AU(){return this._$AM._$AU}_$AT(i,e,t){this._$Ct=i,this._$AM=e,this._$Ci=t}_$AS(i,e){return this.update(i,e)}update(i,e){return this.render(...e)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Oe extends oi{constructor(i){if(super(i),this.et=I,i.type!==ri.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(i){if(i===I||i==null)return this.ft=void 0,this.et=i;if(i===te)return i;if(typeof i!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(i===this.et)return this.ft;this.et=i;const e=[i];return e.raw=e,this.ft={_$litType$:this.constructor.resultType,strings:e,values:[]}}}Oe.directiveName="unsafeHTML",Oe.resultType=1;const ce=si(Oe);class wt extends Z{setupStyles(){let i=this.querySelector('style[slot="lightbox-styles"]');i&&i.sheet&&(this.adoptedStyleSheets=[i.sheet])}constructor(){super(),this.setupStyles(),this.setupFiguresData(),this.setupFullscreenButton(),this.setupNavigationButtons(),this.setupKeyboardControls()}get counterCurrent(){return this.querySelector("[data-lightbox-counter-current]")}get counterTotal(){return this.querySelector("[data-lightbox-counter-total]")}get fullscreenButton(){return this.querySelector("[data-lightbox-fullscreen]")}get nextButton(){return this.querySelector("[data-lightbox-next]")}get previousButton(){return this.querySelector("[data-lightbox-previous]")}get slides(){return this.querySelectorAll(".q-lightbox-slides__slide")}get slideIds(){return Array.from(this.slides).map(i=>i.id)}get currentSlide(){if(this.slides.length)return this.currentId?this.slides[this.currentSlideIndex]:this.slides[0]}get currentSlideIndex(){if(this.slides.length)return this.currentId?this.slideIds.findIndex(i=>i===this.currentId):0}get fullscreen(){return document.fullscreen||this.wrapper.classList.contains("quire-entry__lightbox--fullscreen")}get wrapper(){return document.querySelector(".quire-entry__lightbox")}enterFullscreen(){const i=this.renderRoot.firstElementChild;i.requestFullscreen?i.requestFullscreen():(this.wrapper.classList.add("quire-entry__lightbox--fullscreen"),document.body.style.position="fixed",document.body.style.top=`-${window.scrollY}px`)}exitFullscreen(){document.exitFullscreen?document.exitFullscreen():(this.wrapper.classList.remove("quire-entry__lightbox--fullscreen"),document.body.style.position="",document.body.style.top="")}next(){if(!this.slides.length)return;const i=this.currentSlideIndex+1,e=this.slideIds[i%this.slides.length];this.currentId=e}previous(){if(!this.slides.length)return;const i=this.currentSlideIndex-1,e=this.slideIds.slice(i)[0];this.currentId=e}_alignSlideData(i){const{aspect_ratio:e="widescreen",caption:t,credit:n,id:r,isSequence:s,label:a,mediaType:l}=i;return{...i,isAudio:l==="soundcloud",isVideo:l==="video"||l==="vimeo"||l==="youtube",aspectRatio:e}}_lightboxSlide(i){const{id:e,mediaType:t,figureElementContent:n,annotationsElementContent:r,aspectRatio:s,isVideo:a,isAudio:l,label:c,labelHtml:u,caption:h,captionHtml:p,credit:v,creditHtml:b}=i,S=`q-lightbox-slides__element--${t}`,$=a?`q-lightbox-slides__element--video q-lightbox-slides__element--${s}`:"";return re`<div class="q-lightbox-slides__slide" slot="slides" id="${e}">
      <div class="q-lightbox-slides__element ${S} ${$} ${l?"q-lightbox-slides__element--audio":""}">
        ${ce(n)}
      </div>
      <div class="q-figure-slides__slide-ui">
        <div class="q-lightbox-slides__caption ${c||h||v?"":"is-hidden"}">
          <span class="q-lightbox-slides__caption-label ${c?"":"is-hidden"}">${ce(u)}</span>
          <span class="q-lightbox-slides__caption-content ${h||v?"":"is-hidden"}">${p?ce(p):""} ${b?ce(b):""}</span>
        </div>
        ${ce(r??"")}
      </div>
    </div>`}setupFiguresData(){const i=this.querySelector('script[type="application/json"]'),e=JSON.parse(i.innerHTML);this.figures=e,e.forEach(t=>{console.log("Rendering",t.id);const n=this._alignSlideData(t);let r=document.createElement("template");Et(this._lightboxSlide(n),r.content);const s=r.content.cloneNode(!0);this.appendChild(s)})}setupFullscreenButton(){this.fullscreenButton&&this.fullscreenButton.addEventListener("click",()=>{this.toggleFullscreen()})}setupNavigationButtons(){!this.nextButton||!this.previousButton||(this.nextButton.addEventListener("click",()=>{this.next()}),this.previousButton.addEventListener("click",()=>{this.previous()}))}setupKeyboardControls(){document.addEventListener("keyup",({code:i})=>{if(this.slides.length>1)switch(i){default:break;case"ArrowRight":this.next();break;case"ArrowLeft":this.previous();break}})}toggleFullscreen(){this.updateFullscreenButton(),this.fullscreen?this.exitFullscreen():this.enterFullscreen()}updateCounterElements(){!this.counterCurrent||!this.counterTotal||(this.counterCurrent.innerText=this.currentSlideIndex+1,this.counterTotal.innerText=this.slides.length)}updateCurrentSlideElement(){this.currentSlide&&(this.slides.forEach(i=>{i.id!==this.currentId&&delete i.dataset.lightboxCurrent,[this.preloadNextId,this.preloadPrevId].includes(i.id)?i.dataset.lightboxPreload=!0:delete i.dataset.lightboxPreload}),this.currentSlide.dataset.lightboxCurrent=!0)}updateFullscreenButton(){this.fullscreenButton&&(this.fullscreenButton.dataset.lightboxFullscreen=!this.fullscreen)}render(){return this.slides.length?(this.currentId=this.slideIds[this.currentSlideIndex],this.preloadNextId=this.currentSlideIndex+1<this.slideIds.length?this.slideIds[this.currentSlideIndex+1]:void 0,this.preloadPrevId=this.currentSlideIndex-1>=0?this.slideIds[this.currentSlideIndex-1]:void 0,this.updateCurrentSlideElement(),this.updateCounterElements(),re`
      <div class="q-lightbox">
        <slot name="lightbox-styles"></slot>
        <slot name="data"></slot>
        <div class="q-lightbox-slides">
          <slot name="slides"></slot>
        </div>
        <slot name="ui"></slot>
      </div>
    `):""}}N(wt,"properties",{currentId:{attribute:"current-id",type:String},preloadNextId:{attribute:"preload-next-id",type:String},preloadPrevId:{attribute:"preload-prev-id",type:String}});customElements.define("q-lightbox",wt);class $t extends Z{get closeButton(){return this.querySelector("[data-modal-close]")}get lightbox(){return this.querySelector("q-lightbox")}constructor(){super(),this.setupKeyboardControls(),this.setupModalTriggers()}close(){this.active=!1,this.currentId=null,this.updateLightboxCurrentId(),this.enableScrolling()}disableScrolling(){document.querySelector("html").style.overflow="hidden"}enableScrolling(){document.querySelector("html").style.overflow="auto"}getCurrentFigureId(i){const{target:e}=i;let t=e;for(;!t.matches("figure")&&!t.getAttribute("id");)t=t.parentNode;return t.getAttribute("id")}open(i){this.currentId=this.getCurrentFigureId(i),this.active=!0,this.updateLightboxCurrentId(),this.disableScrolling()}setupCloseButton(){this.closeButton&&this.closeButton.addEventListener("click",()=>{this.close()})}setupKeyboardControls(){document.addEventListener("keyup",({code:i})=>{this.active&&i==="Escape"&&this.close()})}setupModalTriggers(){document.querySelectorAll(".q-figure__modal-link").forEach(i=>{i.addEventListener("click",e=>{e.preventDefault(),this.open(e)})})}updateLightboxCurrentId(){this.lightbox&&this.lightbox.setAttribute("current-id",this.currentId)}render(){return this.dataset.modalActive=this.active,this.setupCloseButton(),re`
      <div class="q-modal">
        <slot></slot>
      </div>
    `}}N($t,"properties",{active:{type:Boolean},currentId:{attribute:"current-id",type:String}});customElements.define("q-modal",$t);const ai=(o,i,e={})=>{const t={root:document.querySelector(".quire-entry__content"),rootMargin:"-50% 0% -50% 0%",threshold:0,...e},n=s=>{s.forEach(a=>{a.isIntersecting&&i()})};new IntersectionObserver(n,t).observe(o)};var D;const L=(D=class{constructor(i){this.copyLinkButton=i.querySelector(".accordion-section__copy-link-button"),this.element=i,this.id=i.getAttribute("id"),this.globalExpand=document.querySelector(".global-accordion-expand-all"),this.globalCollapse=document.querySelector(".global-accordion-collapse-all"),this.tooltip=i.querySelector(".accordion-tooltip")}get parentAccordions(){return Array.from(L.elements).filter(i=>i.contains(this.element)&&i!=this.element)}static setGlobalControls(){if(!(!!L.globalCollapse&&!!L.globalExpand))return;const e=this.globalControlsState,t=L.elements.length,n=Array.from(L.elements).filter(s=>s.getAttribute("open")===null).length,r=()=>{let s;switch(!0){case n===t:s="allClosed";break;case n===0:s="allOpen";break;default:s="mixed";break}return s};if(e!==r())switch(this.globalControlsState=r(),this.globalControlsState){case"allClosed":L.globalExpand.classList.remove("visually-hidden"),L.globalCollapse.classList.add("visually-hidden");break;case"allOpen":L.globalExpand.classList.add("visually-hidden"),L.globalCollapse.classList.remove("visually-hidden");break;default:L.globalCollapse.classList.remove("visually-hidden"),L.globalExpand.classList.remove("visually-hidden");break}}static setup(){L.elements.length&&(L.elements.forEach(i=>{new L(i).init()}),L.setGlobalControls())}addEventListeners(){this.copyLinkButton.addEventListener("click",this.copyLink.bind(this)),this.element.addEventListener("toggle",L.setGlobalControls.bind(this)),L.globalExpand&&L.globalExpand.addEventListener("click",this.open.bind(this)),L.globalCollapse&&L.globalCollapse.addEventListener("click",this.close.bind(this))}close(){this.element.removeAttribute("open"),L.setGlobalControls()}copyLink(){if(this.copying)return;this.copying=!0;const i=this.copyLinkButton.getAttribute("value"),{origin:e,pathname:t}=window.location;this.tooltip.classList.add("accordion-tooltip--active");try{const n=new URL(t+i,e);navigator.clipboard.writeText(n),window.history.replaceState({},"",n),setTimeout(()=>{this.tooltip.classList.remove("accordion-tooltip--active"),this.copying=!1},2e3)}catch(n){console.error("Error copying heading link: ",n)}}init(){this.addEventListeners(),this.setStateFromUrl()}open(){this.element.setAttribute("open",!0),L.setGlobalControls()}setStateFromUrl(){const i=window.location.hash.replace(/^#/,"");if(!i)return;const e=document.querySelector(window.location.hash);(i===this.id||this.element.contains(e))&&(this.open(),this.parentAccordions&&this.parentAccordions.length&&this.parentAccordions.forEach(t=>t.setAttribute("open",!0)))}},N(D,"className","accordion-section"),N(D,"globalExpand",document.querySelector(".global-accordion-expand-all")),N(D,"globalCollapse",document.querySelector(".global-accordion-collapse-all")),N(D,"elements",document.querySelectorAll(`.${D.className}`)),N(D,"partOfAccordion",i=>i.closest(`.${D.className}`)),D),li=({callback:o,interval:i=200,maxTries:e=10,tries:t=0,validate:n})=>{const r=()=>{if(t===e){console.error("Polling reached maximum number of attempts");return}t++,n()?o():setTimeout(r,i)};r()};function ci(o,i=null,e=null){const t=document.querySelector(".quire-navbar"),n=7,r=t?o-t.clientHeight-n:o-n;[document.documentElement,document.body.parentNode,document.body].forEach(a=>{a.scrollTop=r})}const ze=o=>{if(!o)return;o=o.replace(":","\\:"),o=o.replace(".","\\.");const i=document.querySelector(o);if(i){L.partOfAccordion(i)&&new L(i.closest(`.${L.className}`)).setStateFromUrl();const e=i.getBoundingClientRect().top+window.scrollY;ci(e),setTimeout(()=>i.focus())}},At=o=>({checked:o.checked,id:o.getAttribute("value"),input:o.getAttribute("type"),type:o.getAttribute("data-annotation-type")}),Lt=o=>{if(!o)return;const i=o.querySelector("canvas-panel"),e=o.querySelector("q-image-sequence"),t=o.querySelector("image-service");return i?i.getAttribute("canvas-id"):t?t.getAttribute("src"):e?e.getAttribute("sequence-id"):void 0},st=o=>{const[i,e,t,n]=o.split(",").map(r=>parseInt(r.trim()));return{x:i,y:e,width:t,height:n}},Qe=function({annotationIds:o=[],figureId:i,historyBehavior:e="push",region:t,sequence:n={}}){if(!i){console.error("goToFigureState called without an undefined figureId");return}const r=`#${i}`,s=`[slot="slides"][id="${i}"]`,a=document.querySelector(r),l=document.querySelector(s),c=Lt(a||l);if(!a&&!l||!c)return;const h=[...document.querySelectorAll(`#${i} .annotations-ui__input, [slot="slides"][id="${i}"] .annotations-ui__input`)].map(E=>{const _=E.getAttribute("data-annotation-id");return E.checked=o.includes(_),At(E)});if(l){const E=l.closest("q-lightbox");E.currentId=i}L.elements.forEach(E=>{E.contains(a)&&E.setAttribute("open",!0)}),Ct(c,{annotations:h,region:t||"reset",sequence:n});const p=new URL(window.location.pathname,window.location.origin);p.hash=i,ze(p.hash);const v=new URLSearchParams(o.map(E=>["annotation-id",encodeURIComponent(E)]));t&&v.set("region",encodeURIComponent(t)),Number.isInteger(parseInt(n.index))&&v.set("sequence-index",encodeURIComponent(n.index));const b=v.toString(),S=[p.pathname];b&&S.push(b);const $=[{},"",`${S.join("?")}${p.hash}`];e==="replace"?window.history.replaceState(...$):window.history.pushState(...$)},ot=o=>{const i=o.getAttribute("id"),e=Lt(o.closest(".q-figure, .q-lightbox-slides__slide")),t=document.querySelector("q-lightbox").contains(o),n=At(o),{checked:r,input:s,type:a}=n;if(t){const l=document.querySelector(`#${i.split("lightbox-")[1]}`);l&&(l.checked=o.checked)}else{const l=document.querySelector(`#${["lightbox",i].join("-")}`);l&&(l.checked=o.checked)}if(s==="checkbox"&&a==="choice"){const l=o.closest("form"),c=l.querySelectorAll(".annotations-ui__input[checked]");if(!r&&c.length===1&&c[0].setAttribute("disabled",!0),r){const u=l.querySelector("[disabled]");u&&u.removeAttribute("disabled")}}Ct(e,{annotations:[n]})},ui=(o,i)=>{const{checked:e,id:t,type:n}=i;switch(n){case"annotation":o.applyStyles(t,{opacity:+!!e});break;case"choice":li({callback:()=>di(o,i),validate:()=>!!o.makeChoice});break}},di=(o,i)=>{const{checked:e,id:t,input:n}=i;o.setAttribute("choice-id",t),o.makeChoice(t,{deselect:!e,deselectOthers:n==="radio"})},hi=()=>{const o=document.querySelectorAll(".ref");for(const e of o){let t=e.getAttribute("data-annotation-ids");t=t.length?t.split(","):void 0;const n=e.getAttribute("data-figure-id"),r={index:parseInt(e.getAttribute("data-sequence-index")),transition:parseInt(e.getAttribute("data-sequence-transition"))},s=e.getAttribute("data-region");e.getAttribute("data-on-scroll")==="true"?ai(e,()=>Qe({annotationIds:t,figureId:n,historyBehavior:"replace",region:s,sequence:r})):e.addEventListener("click",({target:l})=>Qe({annotationIds:t,figureId:n,region:s,sequence:r}))}const i=document.querySelectorAll(".annotations-ui__input");for(const e of i)ot(e),e.addEventListener("click",({target:t})=>ot(t))},Ct=(o,i)=>{const e=document.querySelectorAll(`canvas-panel[canvas-id="${o}"], image-service[src="${o}"], q-image-sequence[sequence-id="${o}"]`);e.length||console.error(`Failed to call update on canvas panel or image-service component with id ${o}. Element does not exist.`);const{annotations:t,region:n}=i;e.forEach(r=>{const s=r.tagName.toLowerCase()==="q-image-sequence";if(s&&pi(r,i),n&&!s){const a=st(n&&n!=="reset"?n:r.getAttribute("region"));r.transition(l=>{l.goToRegion(a,{transition:{easing:r.easingFunctions().easeOutExpo,duration:2e3}})})}Array.isArray(t)&&t.forEach(a=>ui(r,a))})},pi=(o,{sequence:i={}})=>{const{index:e,transition:t}=i,n=parseInt(o.getAttribute("index")),r=parseInt(e);if(Number.isInteger(r)&&r>=0&&n!==r){if(t){o.setAttribute("transition",t),o.setAttribute("rotate-to-index",r);return}o.setAttribute("rotate-to-index",!1),o.setAttribute("index",r)}};function ae(o,i){var e;const n=(((e=o.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window).getComputedStyle(o);return n.getPropertyValue(i)||n[i]}const ie=96,Ie=25.4,fi=72,gi=6;function qe(o){return o?ae(o,"fontSize")||qe(o.parentElement):ae(window.document.documentElement,"fontSize")}function vi(o){var i;const e=o||"0",t=parseFloat(e),n=e.match(/[\d-.]+(\w+)$/),r=(i=n==null?void 0:n[1])!==null&&i!==void 0?i:"";return[t,r.toLowerCase()]}function De(o,i){var e,t;const n=(t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView)!==null&&t!==void 0?t:window,r=n.document.documentElement||n.document.body,[s,a]=vi(o);switch(a){case"rem":return s*De(qe(window.document.documentElement));case"em":return s*De(qe(i),i==null?void 0:i.parentElement);case"in":return s*ie;case"q":return s*ie/Ie/4;case"mm":return s*ie/Ie;case"cm":return s*ie*10/Ie;case"pt":return s*ie/fi;case"pc":return s*ie/gi;case"vh":return(s*n.innerHeight||r.clientWidth)/100;case"vw":return(s*n.innerWidth||r.clientHeight)/100;case"vmin":return s*Math.min(n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)/100;case"vmax":return s*Math.max(n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)/100;default:return s}}function Ne(o,i=0){let e=0,t;return Object.assign((...r)=>{const s=Math.max(0,e+i-Date.now());s?(clearTimeout(t),t=setTimeout(()=>{e=Date.now(),o(...r)},s)):(e=Date.now(),o(...r))},{cancel:()=>{e=0,clearTimeout(t)}})}function V(o,i){o.classList.add(i)}function z(o,i){o.classList.remove(i)}function at(o,i){return o.classList.contains(i)}const It="littlefoot__tooltip";function Fe(o){const i=Number.parseFloat(ae(o,"marginLeft")),e=o.offsetWidth-i;return(o.getBoundingClientRect().left+e/2)/window.innerWidth}function mi(o,i,e){const[t,n]=function(r,s){const a=Number.parseInt(ae(s,"marginTop"),10),l=2*a+s.offsetHeight,c=r.getBoundingClientRect().top+r.offsetHeight/2,u=window.innerHeight-c;return u>=l||u>=c?["below",u-a-15]:["above",c-a-15]}(i,o);if(e!==t){z(o,"is-"+e),V(o,"is-"+t);const r=100*Fe(i)+"%",s=t==="above"?"100%":"0";o.style.transformOrigin=r+" "+s}return[t,n]}const ue="is-active",de="is-changing",lt="is-scrollable",ct=o=>document.body.contains(o);function yi({id:o,button:i,content:e,host:t,popover:n,wrapper:r}){let s=0,a="above";return{id:o,activate:l=>{var c;i.setAttribute("aria-expanded","true"),V(i,de),V(i,ue),i.insertAdjacentElement("afterend",n),n.style.maxWidth=document.body.clientWidth+"px",c=e,s=Math.round(De(ae(c,"maxHeight"),c)),l==null||l(n,i)},dismiss:l=>{i.setAttribute("aria-expanded","false"),V(i,de),z(i,ue),z(n,ue),l==null||l(n,i)},isActive:()=>at(i,ue),isReady:()=>!at(i,de),ready:()=>{V(n,ue),z(i,de)},remove:()=>{n.remove(),z(i,de)},reposition:()=>{if(ct(n)){const[l,c]=mi(n,i,a);a=l,e.style.maxHeight=Math.min(s,c)+"px",n.offsetHeight<e.scrollHeight?(V(n,lt),e.setAttribute("tabindex","0")):(z(n,lt),e.removeAttribute("tabindex"))}},resize:()=>{ct(n)&&(n.style.left=function(l,c){const u=l.offsetWidth;return-Fe(c)*u+Number.parseInt(ae(c,"marginLeft"),10)+c.offsetWidth/2}(e,i)+"px",r.style.maxWidth=e.offsetWidth+"px",function(l,c){const u=l.querySelector("."+It);u&&(u.style.left=100*Fe(c)+"%")}(n,i))},destroy:()=>t.remove()}}const ut="is-fully-scrolled",bi=o=>i=>{const e=i.currentTarget,t=-i.deltaY;t>0&&z(o,ut),e&&t<=0&&t<e.clientHeight+e.scrollTop-e.scrollHeight&&V(o,ut)},kt="littlefoot__content",Tt="littlefoot__wrapper",_e="littlefoot--print",Pt=(...o)=>o.forEach(i=>V(i,_e));function pe(o,i){return Array.from(o.querySelectorAll(i))}function dt(o,i){return o.querySelector("."+i)||o.firstElementChild||o}function Be(o){const i=document.createElement("div");i.innerHTML=o;const e=i.firstElementChild;return e.remove(),e}function xi(o){return o!==void 0}function Rt(o){const i=o.parentElement,e=pe(i,":scope > :not(."+_e+")"),t=e.filter(n=>n.tagName==="HR");e.length===t.length&&(Pt(...t.concat(i)),Rt(i))}function Ot(o,i){const e=o.parentElement;o.remove(),e&&e!==i&&!e.innerHTML.replace(/(\[\]|&nbsp;|\s)/g,"")&&Ot(e,i)}function _i([o,i,e],t){const n=Be(e.outerHTML);pe(n,'[href$="#'+o+'"]').forEach(s=>Ot(s,n));const r=n.innerHTML.trim();return[i,e,{id:String(t+1),number:t+1,reference:"lf-"+o,content:r.startsWith("<")?r:"<p>"+r+"</p>"}]}function ht(o){return i=>o.replace(/<%=?\s*(\w+?)\s*%>/g,(e,t)=>{var n;return String((n=i[t])!==null&&n!==void 0?n:"")})}function Si(o,i){const e=ht(o),t=ht(i);return([n,r])=>{const s=r.id,a=Be('<span class="littlefoot">'+e(r)+"</span>"),l=a.firstElementChild;l.setAttribute("aria-expanded","false"),l.dataset.footnoteButton="",l.dataset.footnoteId=s;const c=Be(t(r));c.dataset.footnotePopover="",c.dataset.footnoteId=s;const u=dt(c,Tt),h=dt(c,kt);return function(p,v){p.addEventListener("wheel",Ne(bi(v),16))}(h,c),n.insertAdjacentElement("beforebegin",a),{id:s,button:l,host:a,popover:c,content:h,wrapper:u}}}function Ei({allowDuplicates:o,anchorParentSelector:i,anchorPattern:e,buttonTemplate:t,contentTemplate:n,footnoteSelector:r,numberResetSelector:s,scope:a}){const l=function(c,u,h){return pe(c,h+' a[href*="#"]').filter(p=>(p.href+p.rel).match(u))}(document,e,a).map(function(c,u,h,p){const v=[];return b=>{const S=b.href.split("#")[1],$=S?pe(c,"#"+window.CSS.escape(S)).find(_=>u||!v.includes(_)):void 0,E=$==null?void 0:$.closest(p);if(E){v.push(E);const _=b.closest(h)||b;return[_.id||b.id,_,E]}}}(document,o,i,r)).filter(xi).map(_i).map(s?function(c){let u=0,h=null;return([p,v,b])=>{const S=p.closest(c);return u=h===S?u+1:1,h=S,[p,v,Object.assign(Object.assign({},b),{number:u})]}}(s):c=>c).map(([c,u,h])=>(Pt(c,u),Rt(u),[c,h])).map(Si(t,n)).map(yi);return{footnotes:l,unmount(){l.forEach(c=>c.destroy()),pe(document,"."+_e).forEach(c=>z(c,_e))}}}const Me="[data-footnote-id]",He=(o,i)=>o.target.closest(i),Qt=o=>o==null?void 0:o.dataset.footnoteId,pt=o=>i=>{i.preventDefault();const e=He(i,Me),t=Qt(e);t&&o(t)},he=document.addEventListener,ft=window.addEventListener,gt=(o,i,e,t)=>he(o,n=>{const r=n.target;r!=null&&r.closest(i)&&e.call(r,n)},t),wi={activateDelay:100,activateOnHover:!1,allowDuplicates:!0,allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,dismissOnDocumentTouch:!0,footnoteSelector:"li",hoverDelay:250,numberResetSelector:"",scope:"",contentTemplate:`<aside class="littlefoot__popover" id="fncontent:<% id %>"><div class="${Tt}"><div class="${kt}"><% content %></div></div><div class="${It}"></div></aside>`,buttonTemplate:'<button class="littlefoot__button" id="<% reference %>" title="See Footnote <% number %>"><svg role="img" aria-labelledby="title-<% reference %>" viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><title id="title-<% reference %>">Footnote <% number %></title><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button>'};function $i(o={}){const i=Object.assign(Object.assign({},wi),o),e=function({footnotes:n,unmount:r},s){let a;const l=p=>v=>{v.isReady()&&(v.dismiss(s.dismissCallback),setTimeout(v.remove,p))},c=p=>v=>{s.allowMultiple||n.filter(b=>b.id!==v.id).forEach(l(s.dismissDelay)),v.isReady()&&(v.activate(s.activateCallback),v.reposition(),v.resize(),setTimeout(v.ready,p))},u=p=>v=>{const b=n.find(S=>S.id===v);b&&p(b)},h=()=>n.forEach(l(s.dismissDelay));return{activate:(p,v)=>u(c(v))(p),dismiss:(p,v)=>u(l(v))(p),dismissAll:h,touchOutside:()=>{s.dismissOnDocumentTouch&&h()},repositionAll:()=>n.forEach(p=>p.reposition()),resizeAll:()=>n.forEach(p=>p.resize()),toggle:u(p=>p.isActive()?l(s.dismissDelay)(p):c(s.activateDelay)(p)),hover:u(p=>{a=p.id,s.activateOnHover&&!p.isActive()&&c(s.hoverDelay)(p)}),unhover:u(p=>{p.id===a&&(a=null),s.dismissOnUnhover&&setTimeout(()=>n.filter(v=>v.id!==a).forEach(l(s.dismissDelay)),s.hoverDelay)}),unmount:r}}(Ei(i),i),t=function(n){const r=p=>{const v=He(p,"[data-footnote-button]"),b=Qt(v);b?(p.preventDefault(),n.toggle(b)):He(p,"[data-footnote-popover]")||n.touchOutside()},s=Ne(n.repositionAll,16),a=Ne(n.resizeAll,16),l=pt(n.hover),c=pt(n.unhover),u=new AbortController,h={signal:u.signal};return he("touchend",r,h),he("click",r,h),he("keyup",p=>{p.keyCode!==27&&p.key!=="Escape"&&p.key!=="Esc"||n.dismissAll()},h),he("gestureend",s,h),ft("scroll",s,h),ft("resize",a,h),gt("mouseover",Me,l,h),gt("mouseout",Me,c,h),()=>{u.abort()}}(e);return{activate(n,r=i.activateDelay){e.activate(n,r)},dismiss(n,r=i.dismissDelay){n===void 0?e.dismissAll():e.dismiss(n,r)},unmount(){t(),e.unmount()},getSetting:n=>i[n],updateSetting(n,r){i[n]=r}}}var qt=qt||{};qt.Widget=function(o){function i(t){if(e[t])return e[t].exports;var n=e[t]={exports:{},id:t,loaded:!1};return o[t].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=o,i.c=e,i.p="",i(0)}([function(o,i,e){function t(d){return!!(d===""||d&&d.charCodeAt&&d.substr)}function n(d){return!!(d&&d.constructor&&d.call&&d.apply)}function r(d){return!(!d||d.nodeType!==1||d.nodeName.toUpperCase()!=="IFRAME")}function s(d){var g,m=!1;for(g in B)if(B.hasOwnProperty(g)&&B[g]===d){m=!0;break}return m}function a(d){var g,m,f;for(g=0,m=H.length;g<m&&(f=d(H[g]),f!==!1);g++);}function l(d){var g,m,f,x="";for(d.substr(0,2)==="//"&&(d=window.location.protocol+d),f=d.split("/"),g=0,m=f.length;g<m&&g<3;g++)x+=f[g],g<2&&(x+="/");return x}function c(d){return d.contentWindow?d.contentWindow:d.contentDocument&&"parentWindow"in d.contentDocument?d.contentDocument.parentWindow:null}function u(d){var g,m=[];for(g in d)d.hasOwnProperty(g)&&m.push(d[g]);return m}function h(d,g,m){m.callbacks[d]=m.callbacks[d]||[],m.callbacks[d].push(g)}function p(d,g){var m,f=!0;return g.callbacks[d]=[],a(function(x){if(m=x.callbacks[d]||[],m.length)return f=!1,!1}),f}function v(d,g,m){var f,x,A=c(m);return!!A.postMessage&&(f=m.getAttribute("src").split("?")[0],x=JSON.stringify({method:d,value:g}),f.substr(0,2)==="//"&&(f=window.location.protocol+f),f=f.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com"),void A.postMessage(x,f))}function b(d){var g;return a(function(m){if(m.instance===d)return g=m,!1}),g}function S(d){var g;return a(function(m){if(c(m.element)===d)return g=m,!1}),g}function $(d,g){return function(m){var f=n(m),x=b(this),A=!f&&g?m:null,Q=f&&!g?m:null;return Q&&h(d,Q,x),v(d,A,x.element),this}}function E(d,g,m){var f,x,A;for(f=0,x=g.length;f<x;f++)A=g[f],d[A]=$(A,m)}function _(d,g,m){return d+"?url="+g+"&"+w(m)}function w(d){var g,m,f=[];for(g in d)d.hasOwnProperty(g)&&(m=d[g],f.push(g+"="+(g==="start_track"?parseInt(m,10):m?"true":"false")));return f.join("&")}function T(d,g,m){var f,x,A=d.callbacks[g]||[];for(f=0,x=A.length;f<x;f++)A[f].apply(d.instance,m);(s(g)||g===P.READY)&&(d.callbacks[g]=[])}function k(d){var g,m,f,x,A;try{m=JSON.parse(d.data)}catch{return!1}return g=S(d.source),f=m.method,x=m.value,(!g||O(d.origin)===O(g.domain))&&(g?(f===P.READY&&(g.isReady=!0,T(g,M),p(M,g)),f!==P.PLAY||g.playEventFired||(g.playEventFired=!0),f!==P.PLAY_PROGRESS||g.playEventFired||(g.playEventFired=!0,T(g,P.PLAY,[x])),A=[],x!==void 0&&A.push(x),void T(g,f,A)):(f===P.READY&&X.push(d.source),!1))}function O(d){return d.replace(y,"")}var R,W,F,G=e(1),B=e(2),Y=e(3),P=G.api,q=G.bridge,X=[],H=[],M="__LATE_BINDING__",U="http://wt.soundcloud.test:9200/",y=/^http(?:s?)/;window.addEventListener?window.addEventListener("message",k,!1):window.attachEvent("onmessage",k),o.exports=F=function(d,g,m){if(t(d)&&(d=document.getElementById(d)),!r(d))throw new Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");g&&(m=m||{},d.src=_(U,g,m));var f,x,A=S(c(d));return A&&A.instance?A.instance:(f=X.indexOf(c(d))>-1,x=new R(d),H.push(new W(x,d,f)),x)},F.Events=P,window.SC=window.SC||{},window.SC.Widget=F,W=function(d,g,m){this.instance=d,this.element=g,this.domain=l(g.getAttribute("src")),this.isReady=!!m,this.callbacks={}},R=function(){},R.prototype={constructor:R,load:function(d,g){if(d){g=g||{};var m=this,f=b(this),x=f.element,A=x.src,Q=A.substr(0,A.indexOf("?"));f.isReady=!1,f.playEventFired=!1,x.onload=function(){m.bind(P.READY,function(){var C,me=f.callbacks;for(C in me)me.hasOwnProperty(C)&&C!==P.READY&&v(q.ADD_LISTENER,C,f.element);g.callback&&g.callback()})},x.src=_(Q,d,g)}},bind:function(d,g){var m=this,f=b(this);return f&&f.element&&(d===P.READY&&f.isReady?setTimeout(g,1):f.isReady?(h(d,g,f),v(q.ADD_LISTENER,d,f.element)):h(M,function(){m.bind(d,g)},f)),this},unbind:function(d){var g,m=b(this);m&&m.element&&(g=p(d,m),d!==P.READY&&g&&v(q.REMOVE_LISTENER,d,m.element))}},E(R.prototype,u(B)),E(R.prototype,u(Y),!0)},function(o,i){i.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},i.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}},function(o,i){o.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}},function(o,i){o.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}]);function Ai(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Dt={exports:{}};/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9
 * Copyright (C) 2020 Oliver Nightingale
 * @license MIT
 */(function(o,i){(function(){var e=function(t){var n=new e.Builder;return n.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),n.searchPipeline.add(e.stemmer),t.call(n,n),n.build()};e.version="2.3.9";/*!
 * lunr.utils
 * Copyright (C) 2020 Oliver Nightingale
 */e.utils={},e.utils.warn=function(t){return function(n){t.console&&console.warn&&console.warn(n)}}(this),e.utils.asString=function(t){return t==null?"":t.toString()},e.utils.clone=function(t){if(t==null)return t;for(var n=Object.create(null),r=Object.keys(t),s=0;s<r.length;s++){var a=r[s],l=t[a];if(Array.isArray(l)){n[a]=l.slice();continue}if(typeof l=="string"||typeof l=="number"||typeof l=="boolean"){n[a]=l;continue}throw new TypeError("clone is not deep and does not support nested objects")}return n},e.FieldRef=function(t,n,r){this.docRef=t,this.fieldName=n,this._stringValue=r},e.FieldRef.joiner="/",e.FieldRef.fromString=function(t){var n=t.indexOf(e.FieldRef.joiner);if(n===-1)throw"malformed field ref string";var r=t.slice(0,n),s=t.slice(n+1);return new e.FieldRef(s,r,t)},e.FieldRef.prototype.toString=function(){return this._stringValue==null&&(this._stringValue=this.fieldName+e.FieldRef.joiner+this.docRef),this._stringValue};/*!
 * lunr.Set
 * Copyright (C) 2020 Oliver Nightingale
 */e.Set=function(t){if(this.elements=Object.create(null),t){this.length=t.length;for(var n=0;n<this.length;n++)this.elements[t[n]]=!0}else this.length=0},e.Set.complete={intersect:function(t){return t},union:function(){return this},contains:function(){return!0}},e.Set.empty={intersect:function(){return this},union:function(t){return t},contains:function(){return!1}},e.Set.prototype.contains=function(t){return!!this.elements[t]},e.Set.prototype.intersect=function(t){var n,r,s,a=[];if(t===e.Set.complete)return this;if(t===e.Set.empty)return t;this.length<t.length?(n=this,r=t):(n=t,r=this),s=Object.keys(n.elements);for(var l=0;l<s.length;l++){var c=s[l];c in r.elements&&a.push(c)}return new e.Set(a)},e.Set.prototype.union=function(t){return t===e.Set.complete?e.Set.complete:t===e.Set.empty?this:new e.Set(Object.keys(this.elements).concat(Object.keys(t.elements)))},e.idf=function(t,n){var r=0;for(var s in t)s!="_index"&&(r+=Object.keys(t[s]).length);var a=(n-r+.5)/(r+.5);return Math.log(1+Math.abs(a))},e.Token=function(t,n){this.str=t||"",this.metadata=n||{}},e.Token.prototype.toString=function(){return this.str},e.Token.prototype.update=function(t){return this.str=t(this.str,this.metadata),this},e.Token.prototype.clone=function(t){return t=t||function(n){return n},new e.Token(t(this.str,this.metadata),this.metadata)};/*!
 * lunr.tokenizer
 * Copyright (C) 2020 Oliver Nightingale
 */e.tokenizer=function(t,n){if(t==null||t==null)return[];if(Array.isArray(t))return t.map(function(v){return new e.Token(e.utils.asString(v).toLowerCase(),e.utils.clone(n))});for(var r=t.toString().toLowerCase(),s=r.length,a=[],l=0,c=0;l<=s;l++){var u=r.charAt(l),h=l-c;if(u.match(e.tokenizer.separator)||l==s){if(h>0){var p=e.utils.clone(n)||{};p.position=[c,h],p.index=a.length,a.push(new e.Token(r.slice(c,l),p))}c=l+1}}return a},e.tokenizer.separator=/[\s\-]+/;/*!
 * lunr.Pipeline
 * Copyright (C) 2020 Oliver Nightingale
 */e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions=Object.create(null),e.Pipeline.registerFunction=function(t,n){n in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+n),t.label=n,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var n=t.label&&t.label in this.registeredFunctions;n||e.utils.warn(`Function is not registered with pipeline. This may cause problems when serialising the index.
`,t)},e.Pipeline.load=function(t){var n=new e.Pipeline;return t.forEach(function(r){var s=e.Pipeline.registeredFunctions[r];if(s)n.add(s);else throw new Error("Cannot load unregistered function: "+r)}),n},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(n){e.Pipeline.warnIfFunctionNotRegistered(n),this._stack.push(n)},this)},e.Pipeline.prototype.after=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var r=this._stack.indexOf(t);if(r==-1)throw new Error("Cannot find existingFn");r=r+1,this._stack.splice(r,0,n)},e.Pipeline.prototype.before=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var r=this._stack.indexOf(t);if(r==-1)throw new Error("Cannot find existingFn");this._stack.splice(r,0,n)},e.Pipeline.prototype.remove=function(t){var n=this._stack.indexOf(t);n!=-1&&this._stack.splice(n,1)},e.Pipeline.prototype.run=function(t){for(var n=this._stack.length,r=0;r<n;r++){for(var s=this._stack[r],a=[],l=0;l<t.length;l++){var c=s(t[l],l,t);if(!(c==null||c===""))if(Array.isArray(c))for(var u=0;u<c.length;u++)a.push(c[u]);else a.push(c)}t=a}return t},e.Pipeline.prototype.runString=function(t,n){var r=new e.Token(t,n);return this.run([r]).map(function(s){return s.toString()})},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})};/*!
 * lunr.Vector
 * Copyright (C) 2020 Oliver Nightingale
 */e.Vector=function(t){this._magnitude=0,this.elements=t||[]},e.Vector.prototype.positionForIndex=function(t){if(this.elements.length==0)return 0;for(var n=0,r=this.elements.length/2,s=r-n,a=Math.floor(s/2),l=this.elements[a*2];s>1&&(l<t&&(n=a),l>t&&(r=a),l!=t);)s=r-n,a=n+Math.floor(s/2),l=this.elements[a*2];if(l==t||l>t)return a*2;if(l<t)return(a+1)*2},e.Vector.prototype.insert=function(t,n){this.upsert(t,n,function(){throw"duplicate index"})},e.Vector.prototype.upsert=function(t,n,r){this._magnitude=0;var s=this.positionForIndex(t);this.elements[s]==t?this.elements[s+1]=r(this.elements[s+1],n):this.elements.splice(s,0,t,n)},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t=0,n=this.elements.length,r=1;r<n;r+=2){var s=this.elements[r];t+=s*s}return this._magnitude=Math.sqrt(t)},e.Vector.prototype.dot=function(t){for(var n=0,r=this.elements,s=t.elements,a=r.length,l=s.length,c=0,u=0,h=0,p=0;h<a&&p<l;)c=r[h],u=s[p],c<u?h+=2:c>u?p+=2:c==u&&(n+=r[h+1]*s[p+1],h+=2,p+=2);return n},e.Vector.prototype.similarity=function(t){return this.dot(t)/this.magnitude()||0},e.Vector.prototype.toArray=function(){for(var t=new Array(this.elements.length/2),n=1,r=0;n<this.elements.length;n+=2,r++)t[r]=this.elements[n];return t},e.Vector.prototype.toJSON=function(){return this.elements};/*!
 * lunr.stemmer
 * Copyright (C) 2020 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */e.stemmer=function(){var t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},n={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[^aeiou]",s="[aeiouy]",a=r+"[^aeiouy]*",l=s+"[aeiou]*",c="^("+a+")?"+l+a,u="^("+a+")?"+l+a+"("+l+")?$",h="^("+a+")?"+l+a+l+a,p="^("+a+")?"+s,v=new RegExp(c),b=new RegExp(h),S=new RegExp(u),$=new RegExp(p),E=/^(.+?)(ss|i)es$/,_=/^(.+?)([^s])s$/,w=/^(.+?)eed$/,T=/^(.+?)(ed|ing)$/,k=/.$/,O=/(at|bl|iz)$/,R=new RegExp("([^aeiouylsz])\\1$"),W=new RegExp("^"+a+s+"[^aeiouwxy]$"),F=/^(.+?[^aeiou])y$/,G=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,B=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,Y=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,P=/^(.+?)(s|t)(ion)$/,q=/^(.+?)e$/,X=/ll$/,H=new RegExp("^"+a+s+"[^aeiouwxy]$"),M=function(y){var d,g,m,f,x,A,Q;if(y.length<3)return y;if(m=y.substr(0,1),m=="y"&&(y=m.toUpperCase()+y.substr(1)),f=E,x=_,f.test(y)?y=y.replace(f,"$1$2"):x.test(y)&&(y=y.replace(x,"$1$2")),f=w,x=T,f.test(y)){var C=f.exec(y);f=v,f.test(C[1])&&(f=k,y=y.replace(f,""))}else if(x.test(y)){var C=x.exec(y);d=C[1],x=$,x.test(d)&&(y=d,x=O,A=R,Q=W,x.test(y)?y=y+"e":A.test(y)?(f=k,y=y.replace(f,"")):Q.test(y)&&(y=y+"e"))}if(f=F,f.test(y)){var C=f.exec(y);d=C[1],y=d+"i"}if(f=G,f.test(y)){var C=f.exec(y);d=C[1],g=C[2],f=v,f.test(d)&&(y=d+t[g])}if(f=B,f.test(y)){var C=f.exec(y);d=C[1],g=C[2],f=v,f.test(d)&&(y=d+n[g])}if(f=Y,x=P,f.test(y)){var C=f.exec(y);d=C[1],f=b,f.test(d)&&(y=d)}else if(x.test(y)){var C=x.exec(y);d=C[1]+C[2],x=b,x.test(d)&&(y=d)}if(f=q,f.test(y)){var C=f.exec(y);d=C[1],f=b,x=S,A=H,(f.test(d)||x.test(d)&&!A.test(d))&&(y=d)}return f=X,x=b,f.test(y)&&x.test(y)&&(f=k,y=y.replace(f,"")),m=="y"&&(y=m.toLowerCase()+y.substr(1)),y};return function(U){return U.update(M)}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer");/*!
 * lunr.stopWordFilter
 * Copyright (C) 2020 Oliver Nightingale
 */e.generateStopWordFilter=function(t){var n=t.reduce(function(r,s){return r[s]=s,r},{});return function(r){if(r&&n[r.toString()]!==r.toString())return r}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter");/*!
 * lunr.trimmer
 * Copyright (C) 2020 Oliver Nightingale
 */e.trimmer=function(t){return t.update(function(n){return n.replace(/^\W+/,"").replace(/\W+$/,"")})},e.Pipeline.registerFunction(e.trimmer,"trimmer");/*!
 * lunr.TokenSet
 * Copyright (C) 2020 Oliver Nightingale
 */e.TokenSet=function(){this.final=!1,this.edges={},this.id=e.TokenSet._nextId,e.TokenSet._nextId+=1},e.TokenSet._nextId=1,e.TokenSet.fromArray=function(t){for(var n=new e.TokenSet.Builder,r=0,s=t.length;r<s;r++)n.insert(t[r]);return n.finish(),n.root},e.TokenSet.fromClause=function(t){return"editDistance"in t?e.TokenSet.fromFuzzyString(t.term,t.editDistance):e.TokenSet.fromString(t.term)},e.TokenSet.fromFuzzyString=function(t,n){for(var r=new e.TokenSet,s=[{node:r,editsRemaining:n,str:t}];s.length;){var a=s.pop();if(a.str.length>0){var l=a.str.charAt(0),c;l in a.node.edges?c=a.node.edges[l]:(c=new e.TokenSet,a.node.edges[l]=c),a.str.length==1&&(c.final=!0),s.push({node:c,editsRemaining:a.editsRemaining,str:a.str.slice(1)})}if(a.editsRemaining!=0){if("*"in a.node.edges)var u=a.node.edges["*"];else{var u=new e.TokenSet;a.node.edges["*"]=u}if(a.str.length==0&&(u.final=!0),s.push({node:u,editsRemaining:a.editsRemaining-1,str:a.str}),a.str.length>1&&s.push({node:a.node,editsRemaining:a.editsRemaining-1,str:a.str.slice(1)}),a.str.length==1&&(a.node.final=!0),a.str.length>=1){if("*"in a.node.edges)var h=a.node.edges["*"];else{var h=new e.TokenSet;a.node.edges["*"]=h}a.str.length==1&&(h.final=!0),s.push({node:h,editsRemaining:a.editsRemaining-1,str:a.str.slice(1)})}if(a.str.length>1){var p=a.str.charAt(0),v=a.str.charAt(1),b;v in a.node.edges?b=a.node.edges[v]:(b=new e.TokenSet,a.node.edges[v]=b),a.str.length==1&&(b.final=!0),s.push({node:b,editsRemaining:a.editsRemaining-1,str:p+a.str.slice(2)})}}}return r},e.TokenSet.fromString=function(t){for(var n=new e.TokenSet,r=n,s=0,a=t.length;s<a;s++){var l=t[s],c=s==a-1;if(l=="*")n.edges[l]=n,n.final=c;else{var u=new e.TokenSet;u.final=c,n.edges[l]=u,n=u}}return r},e.TokenSet.prototype.toArray=function(){for(var t=[],n=[{prefix:"",node:this}];n.length;){var r=n.pop(),s=Object.keys(r.node.edges),a=s.length;r.node.final&&(r.prefix.charAt(0),t.push(r.prefix));for(var l=0;l<a;l++){var c=s[l];n.push({prefix:r.prefix.concat(c),node:r.node.edges[c]})}}return t},e.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var t=this.final?"1":"0",n=Object.keys(this.edges).sort(),r=n.length,s=0;s<r;s++){var a=n[s],l=this.edges[a];t=t+a+l.id}return t},e.TokenSet.prototype.intersect=function(t){for(var n=new e.TokenSet,r=void 0,s=[{qNode:t,output:n,node:this}];s.length;){r=s.pop();for(var a=Object.keys(r.qNode.edges),l=a.length,c=Object.keys(r.node.edges),u=c.length,h=0;h<l;h++)for(var p=a[h],v=0;v<u;v++){var b=c[v];if(b==p||p=="*"){var S=r.node.edges[b],$=r.qNode.edges[p],E=S.final&&$.final,_=void 0;b in r.output.edges?(_=r.output.edges[b],_.final=_.final||E):(_=new e.TokenSet,_.final=E,r.output.edges[b]=_),s.push({qNode:$,output:_,node:S})}}}return n},e.TokenSet.Builder=function(){this.previousWord="",this.root=new e.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},e.TokenSet.Builder.prototype.insert=function(t){var n,r=0;if(t<this.previousWord)throw new Error("Out of order word insertion");for(var s=0;s<t.length&&s<this.previousWord.length&&t[s]==this.previousWord[s];s++)r++;this.minimize(r),this.uncheckedNodes.length==0?n=this.root:n=this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var s=r;s<t.length;s++){var a=new e.TokenSet,l=t[s];n.edges[l]=a,this.uncheckedNodes.push({parent:n,char:l,child:a}),n=a}n.final=!0,this.previousWord=t},e.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},e.TokenSet.Builder.prototype.minimize=function(t){for(var n=this.uncheckedNodes.length-1;n>=t;n--){var r=this.uncheckedNodes[n],s=r.child.toString();s in this.minimizedNodes?r.parent.edges[r.char]=this.minimizedNodes[s]:(r.child._str=s,this.minimizedNodes[s]=r.child),this.uncheckedNodes.pop()}};/*!
 * lunr.Index
 * Copyright (C) 2020 Oliver Nightingale
 */e.Index=function(t){this.invertedIndex=t.invertedIndex,this.fieldVectors=t.fieldVectors,this.tokenSet=t.tokenSet,this.fields=t.fields,this.pipeline=t.pipeline},e.Index.prototype.search=function(t){return this.query(function(n){var r=new e.QueryParser(t,n);r.parse()})},e.Index.prototype.query=function(t){for(var n=new e.Query(this.fields),r=Object.create(null),s=Object.create(null),a=Object.create(null),l=Object.create(null),c=Object.create(null),u=0;u<this.fields.length;u++)s[this.fields[u]]=new e.Vector;t.call(n,n);for(var u=0;u<n.clauses.length;u++){var h=n.clauses[u],p=null,v=e.Set.empty;h.usePipeline?p=this.pipeline.runString(h.term,{fields:h.fields}):p=[h.term];for(var b=0;b<p.length;b++){var S=p[b];h.term=S;var $=e.TokenSet.fromClause(h),E=this.tokenSet.intersect($).toArray();if(E.length===0&&h.presence===e.Query.presence.REQUIRED){for(var _=0;_<h.fields.length;_++){var w=h.fields[_];l[w]=e.Set.empty}break}for(var T=0;T<E.length;T++)for(var k=E[T],O=this.invertedIndex[k],R=O._index,_=0;_<h.fields.length;_++){var w=h.fields[_],W=O[w],F=Object.keys(W),G=k+"/"+w,B=new e.Set(F);if(h.presence==e.Query.presence.REQUIRED&&(v=v.union(B),l[w]===void 0&&(l[w]=e.Set.complete)),h.presence==e.Query.presence.PROHIBITED){c[w]===void 0&&(c[w]=e.Set.empty),c[w]=c[w].union(B);continue}if(s[w].upsert(R,h.boost,function(Bt,Mt){return Bt+Mt}),!a[G]){for(var Y=0;Y<F.length;Y++){var P=F[Y],q=new e.FieldRef(P,w),X=W[P],H;(H=r[q])===void 0?r[q]=new e.MatchData(k,w,X):H.add(k,w,X)}a[G]=!0}}}if(h.presence===e.Query.presence.REQUIRED)for(var _=0;_<h.fields.length;_++){var w=h.fields[_];l[w]=l[w].intersect(v)}}for(var M=e.Set.complete,U=e.Set.empty,u=0;u<this.fields.length;u++){var w=this.fields[u];l[w]&&(M=M.intersect(l[w])),c[w]&&(U=U.union(c[w]))}var y=Object.keys(r),d=[],g=Object.create(null);if(n.isNegated()){y=Object.keys(this.fieldVectors);for(var u=0;u<y.length;u++){var q=y[u],m=e.FieldRef.fromString(q);r[q]=new e.MatchData}}for(var u=0;u<y.length;u++){var m=e.FieldRef.fromString(y[u]),f=m.docRef;if(M.contains(f)&&!U.contains(f)){var x=this.fieldVectors[m],A=s[m.fieldName].similarity(x),Q;if((Q=g[f])!==void 0)Q.score+=A,Q.matchData.combine(r[m]);else{var C={ref:f,score:A,matchData:r[m]};g[f]=C,d.push(C)}}}return d.sort(function(me,Ft){return Ft.score-me.score})},e.Index.prototype.toJSON=function(){var t=Object.keys(this.invertedIndex).sort().map(function(r){return[r,this.invertedIndex[r]]},this),n=Object.keys(this.fieldVectors).map(function(r){return[r,this.fieldVectors[r].toJSON()]},this);return{version:e.version,fields:this.fields,fieldVectors:n,invertedIndex:t,pipeline:this.pipeline.toJSON()}},e.Index.load=function(t){var n={},r={},s=t.fieldVectors,a=Object.create(null),l=t.invertedIndex,c=new e.TokenSet.Builder,u=e.Pipeline.load(t.pipeline);t.version!=e.version&&e.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+e.version+"' does not match serialized index '"+t.version+"'");for(var h=0;h<s.length;h++){var p=s[h],v=p[0],b=p[1];r[v]=new e.Vector(b)}for(var h=0;h<l.length;h++){var p=l[h],S=p[0],$=p[1];c.insert(S),a[S]=$}return c.finish(),n.fields=t.fields,n.fieldVectors=r,n.invertedIndex=a,n.tokenSet=c.root,n.pipeline=u,new e.Index(n)};/*!
 * lunr.Builder
 * Copyright (C) 2020 Oliver Nightingale
 */e.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=e.tokenizer,this.pipeline=new e.Pipeline,this.searchPipeline=new e.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},e.Builder.prototype.ref=function(t){this._ref=t},e.Builder.prototype.field=function(t,n){if(/\//.test(t))throw new RangeError("Field '"+t+"' contains illegal character '/'");this._fields[t]=n||{}},e.Builder.prototype.b=function(t){t<0?this._b=0:t>1?this._b=1:this._b=t},e.Builder.prototype.k1=function(t){this._k1=t},e.Builder.prototype.add=function(t,n){var r=t[this._ref],s=Object.keys(this._fields);this._documents[r]=n||{},this.documentCount+=1;for(var a=0;a<s.length;a++){var l=s[a],c=this._fields[l].extractor,u=c?c(t):t[l],h=this.tokenizer(u,{fields:[l]}),p=this.pipeline.run(h),v=new e.FieldRef(r,l),b=Object.create(null);this.fieldTermFrequencies[v]=b,this.fieldLengths[v]=0,this.fieldLengths[v]+=p.length;for(var S=0;S<p.length;S++){var $=p[S];if(b[$]==null&&(b[$]=0),b[$]+=1,this.invertedIndex[$]==null){var E=Object.create(null);E._index=this.termIndex,this.termIndex+=1;for(var _=0;_<s.length;_++)E[s[_]]=Object.create(null);this.invertedIndex[$]=E}this.invertedIndex[$][l][r]==null&&(this.invertedIndex[$][l][r]=Object.create(null));for(var w=0;w<this.metadataWhitelist.length;w++){var T=this.metadataWhitelist[w],k=$.metadata[T];this.invertedIndex[$][l][r][T]==null&&(this.invertedIndex[$][l][r][T]=[]),this.invertedIndex[$][l][r][T].push(k)}}}},e.Builder.prototype.calculateAverageFieldLengths=function(){for(var t=Object.keys(this.fieldLengths),n=t.length,r={},s={},a=0;a<n;a++){var l=e.FieldRef.fromString(t[a]),c=l.fieldName;s[c]||(s[c]=0),s[c]+=1,r[c]||(r[c]=0),r[c]+=this.fieldLengths[l]}for(var u=Object.keys(this._fields),a=0;a<u.length;a++){var h=u[a];r[h]=r[h]/s[h]}this.averageFieldLength=r},e.Builder.prototype.createFieldVectors=function(){for(var t={},n=Object.keys(this.fieldTermFrequencies),r=n.length,s=Object.create(null),a=0;a<r;a++){for(var l=e.FieldRef.fromString(n[a]),c=l.fieldName,u=this.fieldLengths[l],h=new e.Vector,p=this.fieldTermFrequencies[l],v=Object.keys(p),b=v.length,S=this._fields[c].boost||1,$=this._documents[l.docRef].boost||1,E=0;E<b;E++){var _=v[E],w=p[_],T=this.invertedIndex[_]._index,k,O,R;s[_]===void 0?(k=e.idf(this.invertedIndex[_],this.documentCount),s[_]=k):k=s[_],O=k*((this._k1+1)*w)/(this._k1*(1-this._b+this._b*(u/this.averageFieldLength[c]))+w),O*=S,O*=$,R=Math.round(O*1e3)/1e3,h.insert(T,R)}t[l]=h}this.fieldVectors=t},e.Builder.prototype.createTokenSet=function(){this.tokenSet=e.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},e.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new e.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},e.Builder.prototype.use=function(t){var n=Array.prototype.slice.call(arguments,1);n.unshift(this),t.apply(this,n)},e.MatchData=function(t,n,r){for(var s=Object.create(null),a=Object.keys(r||{}),l=0;l<a.length;l++){var c=a[l];s[c]=r[c].slice()}this.metadata=Object.create(null),t!==void 0&&(this.metadata[t]=Object.create(null),this.metadata[t][n]=s)},e.MatchData.prototype.combine=function(t){for(var n=Object.keys(t.metadata),r=0;r<n.length;r++){var s=n[r],a=Object.keys(t.metadata[s]);this.metadata[s]==null&&(this.metadata[s]=Object.create(null));for(var l=0;l<a.length;l++){var c=a[l],u=Object.keys(t.metadata[s][c]);this.metadata[s][c]==null&&(this.metadata[s][c]=Object.create(null));for(var h=0;h<u.length;h++){var p=u[h];this.metadata[s][c][p]==null?this.metadata[s][c][p]=t.metadata[s][c][p]:this.metadata[s][c][p]=this.metadata[s][c][p].concat(t.metadata[s][c][p])}}}},e.MatchData.prototype.add=function(t,n,r){if(!(t in this.metadata)){this.metadata[t]=Object.create(null),this.metadata[t][n]=r;return}if(!(n in this.metadata[t])){this.metadata[t][n]=r;return}for(var s=Object.keys(r),a=0;a<s.length;a++){var l=s[a];l in this.metadata[t][n]?this.metadata[t][n][l]=this.metadata[t][n][l].concat(r[l]):this.metadata[t][n][l]=r[l]}},e.Query=function(t){this.clauses=[],this.allFields=t},e.Query.wildcard=new String("*"),e.Query.wildcard.NONE=0,e.Query.wildcard.LEADING=1,e.Query.wildcard.TRAILING=2,e.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},e.Query.prototype.clause=function(t){return"fields"in t||(t.fields=this.allFields),"boost"in t||(t.boost=1),"usePipeline"in t||(t.usePipeline=!0),"wildcard"in t||(t.wildcard=e.Query.wildcard.NONE),t.wildcard&e.Query.wildcard.LEADING&&t.term.charAt(0)!=e.Query.wildcard&&(t.term="*"+t.term),t.wildcard&e.Query.wildcard.TRAILING&&t.term.slice(-1)!=e.Query.wildcard&&(t.term=""+t.term+"*"),"presence"in t||(t.presence=e.Query.presence.OPTIONAL),this.clauses.push(t),this},e.Query.prototype.isNegated=function(){for(var t=0;t<this.clauses.length;t++)if(this.clauses[t].presence!=e.Query.presence.PROHIBITED)return!1;return!0},e.Query.prototype.term=function(t,n){if(Array.isArray(t))return t.forEach(function(s){this.term(s,e.utils.clone(n))},this),this;var r=n||{};return r.term=t.toString(),this.clause(r),this},e.QueryParseError=function(t,n,r){this.name="QueryParseError",this.message=t,this.start=n,this.end=r},e.QueryParseError.prototype=new Error,e.QueryLexer=function(t){this.lexemes=[],this.str=t,this.length=t.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},e.QueryLexer.prototype.run=function(){for(var t=e.QueryLexer.lexText;t;)t=t(this)},e.QueryLexer.prototype.sliceString=function(){for(var t=[],n=this.start,r=this.pos,s=0;s<this.escapeCharPositions.length;s++)r=this.escapeCharPositions[s],t.push(this.str.slice(n,r)),n=r+1;return t.push(this.str.slice(n,this.pos)),this.escapeCharPositions.length=0,t.join("")},e.QueryLexer.prototype.emit=function(t){this.lexemes.push({type:t,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},e.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},e.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return e.QueryLexer.EOS;var t=this.str.charAt(this.pos);return this.pos+=1,t},e.QueryLexer.prototype.width=function(){return this.pos-this.start},e.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},e.QueryLexer.prototype.backup=function(){this.pos-=1},e.QueryLexer.prototype.acceptDigitRun=function(){var t,n;do t=this.next(),n=t.charCodeAt(0);while(n>47&&n<58);t!=e.QueryLexer.EOS&&this.backup()},e.QueryLexer.prototype.more=function(){return this.pos<this.length},e.QueryLexer.EOS="EOS",e.QueryLexer.FIELD="FIELD",e.QueryLexer.TERM="TERM",e.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",e.QueryLexer.BOOST="BOOST",e.QueryLexer.PRESENCE="PRESENCE",e.QueryLexer.lexField=function(t){return t.backup(),t.emit(e.QueryLexer.FIELD),t.ignore(),e.QueryLexer.lexText},e.QueryLexer.lexTerm=function(t){if(t.width()>1&&(t.backup(),t.emit(e.QueryLexer.TERM)),t.ignore(),t.more())return e.QueryLexer.lexText},e.QueryLexer.lexEditDistance=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.EDIT_DISTANCE),e.QueryLexer.lexText},e.QueryLexer.lexBoost=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.BOOST),e.QueryLexer.lexText},e.QueryLexer.lexEOS=function(t){t.width()>0&&t.emit(e.QueryLexer.TERM)},e.QueryLexer.termSeparator=e.tokenizer.separator,e.QueryLexer.lexText=function(t){for(;;){var n=t.next();if(n==e.QueryLexer.EOS)return e.QueryLexer.lexEOS;if(n.charCodeAt(0)==92){t.escapeCharacter();continue}if(n==":")return e.QueryLexer.lexField;if(n=="~")return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexEditDistance;if(n=="^")return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexBoost;if(n=="+"&&t.width()===1||n=="-"&&t.width()===1)return t.emit(e.QueryLexer.PRESENCE),e.QueryLexer.lexText;if(n.match(e.QueryLexer.termSeparator))return e.QueryLexer.lexTerm}},e.QueryParser=function(t,n){this.lexer=new e.QueryLexer(t),this.query=n,this.currentClause={},this.lexemeIdx=0},e.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var t=e.QueryParser.parseClause;t;)t=t(this);return this.query},e.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},e.QueryParser.prototype.consumeLexeme=function(){var t=this.peekLexeme();return this.lexemeIdx+=1,t},e.QueryParser.prototype.nextClause=function(){var t=this.currentClause;this.query.clause(t),this.currentClause={}},e.QueryParser.parseClause=function(t){var n=t.peekLexeme();if(n!=null)switch(n.type){case e.QueryLexer.PRESENCE:return e.QueryParser.parsePresence;case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:var r="expected either a field or a term, found "+n.type;throw n.str.length>=1&&(r+=" with value '"+n.str+"'"),new e.QueryParseError(r,n.start,n.end)}},e.QueryParser.parsePresence=function(t){var n=t.consumeLexeme();if(n!=null){switch(n.str){case"-":t.currentClause.presence=e.Query.presence.PROHIBITED;break;case"+":t.currentClause.presence=e.Query.presence.REQUIRED;break;default:var r="unrecognised presence operator'"+n.str+"'";throw new e.QueryParseError(r,n.start,n.end)}var s=t.peekLexeme();if(s==null){var r="expecting term or field, found nothing";throw new e.QueryParseError(r,n.start,n.end)}switch(s.type){case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:var r="expecting term or field, found '"+s.type+"'";throw new e.QueryParseError(r,s.start,s.end)}}},e.QueryParser.parseField=function(t){var n=t.consumeLexeme();if(n!=null){if(t.query.allFields.indexOf(n.str)==-1){var r=t.query.allFields.map(function(l){return"'"+l+"'"}).join(", "),s="unrecognised field '"+n.str+"', possible fields: "+r;throw new e.QueryParseError(s,n.start,n.end)}t.currentClause.fields=[n.str];var a=t.peekLexeme();if(a==null){var s="expecting term, found nothing";throw new e.QueryParseError(s,n.start,n.end)}switch(a.type){case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:var s="expecting term, found '"+a.type+"'";throw new e.QueryParseError(s,a.start,a.end)}}},e.QueryParser.parseTerm=function(t){var n=t.consumeLexeme();if(n!=null){t.currentClause.term=n.str.toLowerCase(),n.str.indexOf("*")!=-1&&(t.currentClause.usePipeline=!1);var r=t.peekLexeme();if(r==null){t.nextClause();return}switch(r.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;case e.QueryLexer.PRESENCE:return t.nextClause(),e.QueryParser.parsePresence;default:var s="Unexpected lexeme type '"+r.type+"'";throw new e.QueryParseError(s,r.start,r.end)}}},e.QueryParser.parseEditDistance=function(t){var n=t.consumeLexeme();if(n!=null){var r=parseInt(n.str,10);if(isNaN(r)){var s="edit distance must be numeric";throw new e.QueryParseError(s,n.start,n.end)}t.currentClause.editDistance=r;var a=t.peekLexeme();if(a==null){t.nextClause();return}switch(a.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;case e.QueryLexer.PRESENCE:return t.nextClause(),e.QueryParser.parsePresence;default:var s="Unexpected lexeme type '"+a.type+"'";throw new e.QueryParseError(s,a.start,a.end)}}},e.QueryParser.parseBoost=function(t){var n=t.consumeLexeme();if(n!=null){var r=parseInt(n.str,10);if(isNaN(r)){var s="boost must be numeric";throw new e.QueryParseError(s,n.start,n.end)}t.currentClause.boost=r;var a=t.peekLexeme();if(a==null){t.nextClause();return}switch(a.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;case e.QueryLexer.PRESENCE:return t.nextClause(),e.QueryParser.parsePresence;default:var s="Unexpected lexeme type '"+a.type+"'";throw new e.QueryParseError(s,a.start,a.end)}}},function(t,n){o.exports=n()}(this,function(){return e})})()})(Dt);var Li=Dt.exports;const Ci=Ai(Li);class Ii{constructor(i){this.contentList=i,this.index=this.buildIndex(i)}buildIndex(i){return Ci(function(){this.field("abstract"),this.field("content"),this.field("contributor"),this.field("subtitle"),this.field("title"),this.field("url"),this.ref("url"),i.forEach(e=>{this.add(e)})})}search(i){return this.index.search(i).map(t=>this.contentList.find(({url:n})=>n===t.ref))}}window.toggleMenu=()=>{const o=document.getElementById("site-menu"),i=document.querySelector(".side-by-side > .quire-entry__image-wrap > .quire-entry__image"),e=o.getAttribute("aria-expanded");o.classList.toggle("is-expanded",!o.classList.contains("is-expanded")),e==="true"?(i&&i.classList.remove("menu_open"),o.setAttribute("aria-expanded","false")):(i&&i.classList.add("menu_open"),o.setAttribute("aria-expanded","true"))};window.toggleSearch=()=>{let o=document.getElementById("js-search"),i=document.getElementById("js-search-input"),e=o.getAttribute("aria-expanded");o.classList.toggle("is-active",!o.classList.contains("is-active")),e==="true"?o.setAttribute("aria-expanded","false"):(i.focus(),o.setAttribute("aria-expanded","true"))};window.search=()=>{let i=document.getElementById("js-search-input").value,e=window.QUIRE_SEARCH,t=document.getElementById("js-search-results-list"),n=document.getElementById("js-search-results-template");if(i.length>=3){let a=e.search(i);s(a)}function r(){t.innerText=""}function s(a){r(),a.forEach(l=>{let c=document.importNode(n.content,!0),u=c.querySelector(".js-search-results-item"),h=c.querySelector(".js-search-results-item-title"),p=c.querySelector(".js-search-results-item-type"),v=c.querySelector(".js-search-results-item-length");u.href=l.url,h.textContent=l.title,p.textContent=l.type,v.textContent=l.length,t.appendChild(c)})}};function Nt(o){const i=o.target.closest("a"),e=i.hash;i.pathname.includes(window.location.pathname)&&(o.preventDefault(),window.location.hash=e),ze(e)}function ki(){const i='a[href*="#"]'+['[href="#"]','[href="#0"]',".accordion-section__heading-link",".q-figure__modal-link"].map(t=>`:not(${t})`).join("");document.querySelectorAll(i).forEach(t=>{t.addEventListener("click",Nt)})}function Ti(){document.getElementById("container").classList.remove("no-js"),navigator.userAgent.match(/(iPad|iPhone|iPod)/i),navigator.userAgent.match(/android/i),Pi(),ki()}function Pi(){const o=document.getElementById("js-search").dataset.searchIndex;if(!o){console.warn("Search data url is undefined");return}fetch(o).then(async i=>{const{ok:e,statusText:t,url:n}=i;if(!e){console.warn(`Search data ${t.toLowerCase()} at ${n}`);return}const r=await i.json();window.QUIRE_SEARCH=new Ii(r)})}function Ri(o){const i={month:"long"},e=o.getMonth();let t;[4,5,6].includes(e)?t=o.toLocaleDateString("en-US",i).replace(/[^A-Za-z]+/,""):(t=t===8?"Sept":o.toLocaleDateString("en-US",i).slice(0,3),t+=".");const n=o.getDate(),r=o.getFullYear();return[n,t,r].join(" ")}function Oi(){const o=document.querySelectorAll(".cite-current-date"),i=Ri(new Date);o.forEach(e=>{e.innerHTML=i})}function Qi(o,i){const e=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--gap")),t=o.getBoundingClientRect(),n=i.getBoundingClientRect(),r=n.left-t.left,s=t.right-n.right,a=t.width/2;s>0?o.style.transform=`translateX(-${a+s+e}px)`:r>0&&(o.style.transform=`translateX(-${a-r-e}px)`)}function qi(){let o=document.querySelectorAll(".expandable [aria-expanded]");for(let i=0;i<o.length;i++)o[i].addEventListener("click",e=>{e.stopPropagation(),e.target.getAttribute("aria-expanded")==="false"?e.target.setAttribute("aria-expanded","true"):e.target.setAttribute("aria-expanded","false");let n=e.target.parentNode.querySelector(".quire-citation__content");n&&(n.getAttribute("hidden"),typeof n.getAttribute("hidden")=="string"?n.removeAttribute("hidden"):n.setAttribute("hidden","hidden"),Qi(n,document.documentElement))});document.addEventListener("click",i=>{let e=i.target.parentNode;if(e&&!(e.classList.contains("quire-citation")||e.classList.contains("quire-citation__content"))){let t=document.querySelectorAll(".quire-citation__button"),n=document.querySelectorAll(".quire-citation__content");if(!n)return;for(let r=0;r<n.length;r++){if(!t[r])return;t[r].setAttribute("aria-expanded","false"),n[r].setAttribute("hidden","hidden")}}})}function Di(){Oi(),qi()}function Ni(){const o=new URL(window.location),i=[...new Set(o.searchParams.keys())];return Object.fromEntries(i.map(e=>[e,o.searchParams.getAll(e).map(decodeURIComponent)]))}Ti();window.addEventListener("load",()=>{Di(),ze(window.location.hash);const o=Ni();L.setup(),hi(),window.location.hash&&Qe({figureId:window.location.hash.replace(/^#/,""),annotationIds:o["annotation-id"],region:o.region?o.region[0]:null,sequence:{index:o["sequence-index"]?o["sequence-index"][0]:null}})});$i({activateOnHover:!0,buttonTemplate:'<button aria-label="Footnote <% number %>" class="littlefoot__button" id="<% reference %>" title="See Footnote <% number %>" /> <% number %> </button>'});document.querySelectorAll("a.footnote-backref").forEach(function(o){o.removeEventListener("click",Nt),o.addEventListener("click",function(i){i.preventDefault(),i.stopImmediatePropagation();var e=i.target.href.replace(/.*#/,"#lf-"),t=document.querySelector(".quire__primary > .quire-navbar").getBoundingClientRect().height,n=document.querySelector(e).parentElement.parentElement.getBoundingClientRect().top;window.scrollBy({left:0,top:n-t,behavior:"smooth"})})});
//# sourceMappingURL=index-0d3097ef.js.map
